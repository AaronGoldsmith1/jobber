{% extends 'base.html' %}
{% block content %}
{% load humanize %}

<div class="jumbotron">
  <h1 class="display-4">{{event.title}}</h1>
  <p class="lead">{{event.description}}</p>
  <hr class="my-4">
  <p>Category: {{event.get_type_display}}</p>
  <p>Speaker: {{event.speaker}}</p>
  <p>Date: {{event.dateTime}}</p>
  <p>{{event.dateTime|naturaltime}}</p>
  <hr class="my-4">
  <button 
   {% if is_registered %}
    style="display:none"
  {% endif %} 
  data-token={{ csrf_token }}
  data-eventId={{event.id}}
  data-userId={{user_id}}
  id="register-button" 
  type="button" 
  class="btn btn-primary" 
  data-toggle="button" 
  aria-pressed="false" 
  autocomplete="off">
  Register
</button>

  <button
  {% if is_registered %}
    style="display:initial"
  {% endif %} 
  id="unregister-trigger"
  type="button" 
  class="btn btn-danger" 
  data-toggle="modal" 
  data-target="#unregister-modal">
    Unregister
  </button>
</div>



<div class="modal fade" id="unregister-modal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Unregister for {{event.title}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Are you sure you want to cancel your registration?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button
          data-token={{ csrf_token }}
          data-eventId={{event.id}}
          data-userId={{user_id}} 
          data-dismiss="modal"
          id="unregister-button" 
          type="button" 
          class="btn btn-primary">
          Submit
        </button>
      </div>
    </div>
  </div>
</div>

{% endblock content %}